(this["webpackJsonpvideo-platform"]=this["webpackJsonpvideo-platform"]||[]).push([[0],{11:function(e,t,a){e.exports={PlayPage:"style_PlayPage__3Nf3F",title:"style_title__3Qn5f",Player:"style_Player__1FIqP",AD:"style_AD__15s8F",modal:"style_modal__1kYKE",buttons:"style_buttons__3RK32",description:"style_description__1iaAc"}},14:function(e,t,a){e.exports={VideoItem:"style_VideoItem__22_xz",img:"style_img__24CRZ",title:"style_title__1oZt5",description:"style_description__3aa3G",favorited:"style_favorited__2OOzf",btn:"style_btn__1SSum"}},18:function(e,t,a){e.exports={HomePage:"style_HomePage__39HyE",title:"style_title__2Kyhy",searchInput:"style_searchInput__Zhq1L",loading:"style_loading__2xXeE"}},25:function(e,t,a){e.exports={Pagination:"style_Pagination__10Wd7",current:"style_current__3I22t"}},26:function(e,t,a){e.exports={FavoritePage:"style_FavoritePage__J8pii",title:"style_title__3xUe5"}},31:function(e,t,a){e.exports={App:"App_App__15LM-"}},32:function(e,t,a){e.exports={NavHeader:"style_NavHeader__4JH-_"}},42:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(0),i=a(30),s=a.n(i),o=(a(42),a(9)),r=a(12),l=a(5),d=a(2),j=a(31),u=a.n(j),b=a(17),h=a(32),O=a.n(h),p=function(){return Object(c.jsxs)("ul",{className:O.a.NavHeader,children:[Object(c.jsx)("li",{children:Object(c.jsx)(l.b,{to:"/",children:"\u9996\u9801"})}),Object(c.jsx)("li",{children:Object(c.jsx)(l.b,{to:"/favorite",children:"\u6536\u85cf\u9801"})})]})},f=a(36),x=a(14),_=a.n(x),v=function(e){var t=e.slice(2).slice(0,-1);return/M/.test(t)?t.replace("M",":"):"0:".concat(t)};function m(e){var t,a=e.onClick,n=e.isFavorited,i=Object(f.a)(e,["onClick","isFavorited"]),s=i.id,o=i.snippet,r=o.title,d=o.thumbnails,j=o.description,u=i.contentDetails.duration;return Object(c.jsxs)("div",{className:_.a.VideoItem,children:[Object(c.jsxs)(l.b,{to:"/play?id=".concat(s),children:[Object(c.jsx)("div",{alt:r,className:_.a.img,"data-duration":v(u),style:{backgroundImage:"url(".concat((null===(t=d.standard)||void 0===t?void 0:t.url)||d.default.url,")")}}),Object(c.jsx)("div",{className:_.a.title,children:r}),Object(c.jsx)("div",{className:_.a.description,children:j})]}),n?Object(c.jsx)("span",{className:_.a.favorited,children:"\u5df2\u6536\u85cf"}):Object(c.jsx)("button",{className:_.a.btn,onClick:a.bind(this,i),children:"\u6536\u85cf"})]})}var g=a(19),y=a(34),P=a.n(y),N=a(25),k=a.n(N),F=function(e){var t=e.page,a=e.lastPage,n=e.searchText,i=n?"&searchText=".concat(n):"";return Object(c.jsxs)("ul",{className:k.a.Pagination,children:[Object(c.jsx)("li",{children:t>1&&Object(c.jsx)(l.b,{to:"/?page=".concat(t-1).concat(i),children:"\xab"})}),Object(b.a)(Array(a).keys()).map((function(e){return Object(c.jsx)("li",{children:Object(c.jsx)(l.b,{to:"/?page=".concat(e+1).concat(i),className:P()(Object(g.a)({},k.a.current,t===e+1)),children:e+1})},e)})),Object(c.jsx)("li",{children:t<a&&Object(c.jsx)(l.b,{to:"/?page=".concat(t+1).concat(i),children:"\xbb"})})]})},w=a(18),I=a.n(w),C="AIzaSyBBg9GUQG_f4mcCy_DjBOQstbEswPo1a6g",S=100,V=Math.ceil(S/12),T="https://www.googleapis.com/youtube/v3/search?key=".concat(C,"&maxResults=50&part=snippet&q="),A="https://www.googleapis.com/youtube/v3/videos?key=".concat(C,"&maxResults=50&part=snippet,contentDetails,statistics"),D=[],B=function e(t,a){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";fetch("".concat(t).concat(c)).then((function(e){return e.json()})).then((function(c){var n=c.items,i=c.nextPageToken;(D=[].concat(Object(b.a)(D),Object(b.a)(n))).length<S&&i?e(t,a,"&pageToken=".concat(i)):a(D)}))},E=function(e){var t,a=Object(n.useRef)(),i=Object(d.f)(),s=Object(d.g)(),l=Object(n.useState)([]),j=Object(r.a)(l,2),u=j[0],b=j[1],h=new URLSearchParams(s.search),O=h.get("searchText"),p=Number(null!==(t=h.get("page"))&&void 0!==t?t:1),f=function(t){var a=e.favoriteVideo;a[t.id]=t,e.updateFavoriteVideo(a)},x=function(e){V=Math.ceil(Math.min(S,D.length)/12),b(e)},_=function(e){b([]),D=[],i.push("/?searchText=".concat(e)),B("".concat(T).concat(e),(function(e){var t=e.map((function(e){return e.id.videoId})).slice(0,50).join(",");D=[],B("".concat(A,"&id=").concat(t),x)}))};return Object(n.useEffect)((function(){D=[],O?_(O):B("".concat(A,"&chart=mostPopular"),x)}),[O]),Object(c.jsxs)("div",{className:I.a.HomePage,children:[Object(c.jsx)("div",{className:I.a.title,children:"\u9996\u9801"}),Object(c.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=a.current.value.trim();t&&_(t)},children:Object(c.jsx)("input",{required:!0,type:"text",ref:a,placeholder:"\u641c\u5c0b...",defaultValue:O,className:I.a.searchInput,disabled:0===u.length})}),u.length>1&&Object(c.jsx)(F,Object(o.a)({},{page:p,lastPage:V,searchText:O})),!u.length&&Object(c.jsx)("div",{className:I.a.loading,children:"Loading"}),u.slice(12*(p-1),12*p).map((function(t){return Object(c.jsx)(m,Object(o.a)(Object(o.a)({},t),{},{onClick:f,isFavorited:e.favoriteVideo.hasOwnProperty(t.id)}),t.id)})),u.length>1&&Object(c.jsx)(F,Object(o.a)({},{page:p,lastPage:V,searchText:O}))]})},H=a(35),L=a.n(H),R=a(11),M=a.n(R),J=void 0,G="https://www.googleapis.com/youtube/v3/videos?key=".concat("AIzaSyBBg9GUQG_f4mcCy_DjBOQstbEswPo1a6g","&part=snippet,contentDetails,statistics&id="),Q=function(){var e=Object(n.useRef)(),t=Object(d.g)(),a=new URLSearchParams(t.search).get("id"),i=Object(n.useState)(!0),s=Object(r.a)(i,2),o=s[0],l=s[1],j=Object(n.useState)({}),u=Object(r.a)(j,2),b=u[0],h=u[1],O=function(){l(!o)},p=function(t){var a=e.current.getCurrentTime();e.current.seekTo(a+t,"seconds")};return Object(n.useLayoutEffect)((function(){fetch("".concat(G).concat(a)).then((function(e){return e.json()})).then((function(e){var t=e.items;h(t[0].snippet)}))}),[a]),Object(c.jsxs)("div",{className:M.a.PlayPage,children:[Object(c.jsxs)("div",{className:M.a.Player,children:[Object(c.jsx)(L.a,{width:"100%",playsinline:!0,ref:e,playing:o,url:"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8"}),!o&&Object(c.jsx)("div",{className:M.a.AD,children:Object(c.jsx)("div",{className:M.a.modal,children:Object(c.jsx)("button",{onClick:O,children:"\u95dc\u9589\u5ee3\u544a"})})})]}),Object(c.jsxs)("div",{className:M.a.buttons,children:[Object(c.jsx)("button",{onClick:O,children:"\u64ad\u653e/\u66ab\u505c"}),Object(c.jsx)("button",{onClick:p.bind(J,15),children:"\u5feb\u903215\u79d2"}),Object(c.jsx)("button",{onClick:p.bind(J,-15),children:"\u5012\u903215\u79d2"})]}),Object(c.jsx)("h1",{className:M.a.title,children:b.title}),Object(c.jsx)("pre",{className:M.a.description,children:b.description})]})},U=a(26),q=a.n(U),z=function(e){var t=e.favoriteVideo,a=e.updateFavoriteVideo,n=function(e){delete t[e.id],a(t)};return Object(c.jsxs)("div",{className:q.a.FavoritePage,children:[Object(c.jsx)("div",{className:q.a.title,children:"\u6536\u85cf\u9801"}),Object.keys(t).map((function(e){return Object(c.jsx)(m,Object(o.a)(Object(o.a)({isFavorited:!0},t[e]),{},{onClick:n}),e)}))]})};var K=function(){var e,t=Object(n.useState)(null!==(e=JSON.parse(localStorage.getItem("favoriteVideo")))&&void 0!==e?e:{}),a=Object(r.a)(t,2),i=a[0],s=a[1],j=function(e){localStorage.setItem("favoriteVideo",JSON.stringify(e)),s(Object(o.a)({},e))};return Object(c.jsxs)(l.a,{children:[Object(c.jsx)(p,{}),Object(c.jsx)("div",{className:u.a.App,children:Object(c.jsxs)(d.c,{children:[Object(c.jsx)(d.a,{exact:!0,path:"/play",children:Object(c.jsx)(Q,{})}),Object(c.jsx)(d.a,{exact:!0,path:"/favorite",children:Object(c.jsx)(z,Object(o.a)({},{favoriteVideo:i,updateFavoriteVideo:j}))}),Object(c.jsx)(d.a,{exact:!0,path:"/",children:Object(c.jsx)(E,Object(o.a)({},{favoriteVideo:i,updateFavoriteVideo:j}))})]})})]})},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,69)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),i(e),s(e)}))};s.a.render(Object(c.jsx)(K,{}),document.getElementById("root")),Z()}},[[68,1,2]]]);
//# sourceMappingURL=main.152fc833.chunk.js.map