(this["webpackJsonpvideo-platform"]=this["webpackJsonpvideo-platform"]||[]).push([[0],{13:function(e,t,c){e.exports={VideoItem:"style_VideoItem__22_xz",img:"style_img__24CRZ",title:"style_title__1oZt5",description:"style_description__3aa3G",favorited:"style_favorited__2OOzf",btn:"style_btn__1SSum"}},19:function(e,t,c){e.exports={HomePage:"style_HomePage__39HyE",title:"style_title__2Kyhy",loading:"style_loading__2xXeE"}},20:function(e,t,c){e.exports={PlayPage:"style_PlayPage__3Nf3F",Player:"style_Player__1FIqP",AD:"style_AD__15s8F"}},25:function(e,t,c){e.exports={Pagination:"style_Pagination__10Wd7",current:"style_current__3I22t"}},26:function(e,t,c){e.exports={FavoritePage:"style_FavoritePage__J8pii",title:"style_title__3xUe5"}},31:function(e,t,c){e.exports={App:"App_App__15LM-"}},32:function(e,t,c){e.exports={NavHeader:"style_NavHeader__4JH-_"}},42:function(e,t,c){},68:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c(0),i=c(30),s=c.n(i),o=(c(42),c(9)),r=c(11),l=c(4),j=c(2),d=c(31),b=c.n(d),u=c(16),O=c(32),h=c.n(O),f=function(){return Object(a.jsxs)("ul",{className:h.a.NavHeader,children:[Object(a.jsx)("li",{children:Object(a.jsx)(l.b,{to:"/",children:"\u9996\u9801"})}),Object(a.jsx)("li",{children:Object(a.jsx)(l.b,{to:"/favorite",children:"\u6536\u85cf\u9801"})})]})},p=c(36),x=c(13),v=c.n(x),g=function(e){var t=e.slice(2).slice(0,-1);return/M/.test(t)?t.replace("M",":"):"0:".concat(t)};function m(e){var t,c=e.onClick,n=e.isFavorited,i=Object(p.a)(e,["onClick","isFavorited"]),s=i.id,o=i.snippet,r=o.title,j=o.thumbnails,d=o.description,b=i.contentDetails.duration;return Object(a.jsxs)("div",{className:v.a.VideoItem,children:[Object(a.jsxs)(l.b,{to:"/play?id=".concat(s),children:[Object(a.jsx)("div",{alt:r,className:v.a.img,"data-duration":g(b),style:{backgroundImage:"url(".concat((null===(t=j.standard)||void 0===t?void 0:t.url)||j.default.url,")")}}),Object(a.jsx)("div",{className:v.a.title,children:r}),Object(a.jsx)("div",{className:v.a.description,children:d})]}),n?Object(a.jsx)("span",{className:v.a.favorited,children:"\u5df2\u6536\u85cf"}):Object(a.jsx)("button",{className:v.a.btn,onClick:c.bind(this,i),children:"\u6536\u85cf"})]})}var _=c(17),y=c(34),P=c.n(y),N=c(25),k=c.n(N),F=function(e){var t=e.page,c=e.lastPage,n=e.searchText,i=n?"&searchText=".concat(n):"";return Object(a.jsxs)("ul",{className:k.a.Pagination,children:[Object(a.jsx)("li",{children:t>1&&Object(a.jsx)(l.b,{to:"/?page=".concat(t-1).concat(i),children:"\xab"})}),Object(u.a)(Array(c).keys()).map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(l.b,{to:"/?page=".concat(e+1).concat(i),className:P()(Object(_.a)({},k.a.current,t===e+1)),children:e+1})},e)})),Object(a.jsx)("li",{children:t<c&&Object(a.jsx)(l.b,{to:"/?page=".concat(t+1).concat(i),children:"\xbb"})})]})},w=c(19),S=c.n(w),C="AIzaSyBBg9GUQG_f4mcCy_DjBOQstbEswPo1a6g",I=100,V=Math.ceil(I/12),A="https://www.googleapis.com/youtube/v3/search?key=".concat(C,"&maxResults=50&part=snippet&q="),D="https://www.googleapis.com/youtube/v3/videos?key=".concat(C,"&maxResults=50&part=snippet,contentDetails,statistics"),T=[],B=function e(t,c){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";fetch("".concat(t).concat(a)).then((function(e){return e.json()})).then((function(a){var n=a.items,i=a.nextPageToken;(T=[].concat(Object(u.a)(T),Object(u.a)(n))).length<I&&i?e(t,c,"&pageToken=".concat(i)):c(T)}))},H=function(e){var t,c=Object(n.useRef)(),i=Object(j.f)(),s=Object(j.g)(),l=Object(n.useState)([]),d=Object(r.a)(l,2),b=d[0],u=d[1],O=new URLSearchParams(s.search),h=O.get("searchText"),f=Number(null!==(t=O.get("page"))&&void 0!==t?t:1),p=function(t){var c=e.favoriteVideo;c[t.id]=t,e.updateFavoriteVideo(c)},x=function(e){V=Math.ceil(Math.min(I,T.length)/12),u(e)},v=function(e){u([]),T=[],i.push("/?searchText=".concat(e)),B("".concat(A).concat(e),(function(e){var t=e.map((function(e){return e.id.videoId})).slice(0,50).join(",");T=[],B("".concat(D,"&id=").concat(t),x)}))};return Object(n.useEffect)((function(){T=[],h?v(h):B("".concat(D,"&chart=mostPopular"),x)}),[h]),Object(a.jsxs)("div",{className:S.a.HomePage,children:[Object(a.jsx)("div",{className:S.a.title,children:"\u9996\u9801"}),Object(a.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=c.current.value.trim();t&&v(t)},children:Object(a.jsx)("input",{required:!0,type:"text",ref:c,placeholder:"\u641c\u5c0b...",disabled:0===b.length})}),b.length>1&&Object(a.jsx)(F,Object(o.a)({},{page:f,lastPage:V,searchText:h})),!b.length&&Object(a.jsx)("div",{className:S.a.loading,children:"Loading"}),b.slice(12*(f-1),12*f).map((function(t){return Object(a.jsx)(m,Object(o.a)(Object(o.a)({},t),{},{onClick:p,isFavorited:e.favoriteVideo.hasOwnProperty(t.id)}),t.id)})),b.length>1&&Object(a.jsx)(F,Object(o.a)({},{page:f,lastPage:V,searchText:h}))]})},E=c(35),L=c.n(E),M=c(20),R=c.n(M),J=void 0,G="https://www.googleapis.com/youtube/v3/videos?key=".concat("AIzaSyBBg9GUQG_f4mcCy_DjBOQstbEswPo1a6g","&part=snippet,contentDetails,statistics&id="),U=function(){var e=Object(n.useRef)(),t=Object(j.g)(),c=new URLSearchParams(t.search).get("id"),i=Object(n.useState)({}),s=Object(r.a)(i,2),o=s[0],d=s[1],b=Object(n.useState)(!0),u=Object(r.a)(b,2),O=u[0],h=u[1],f=Object(n.useState)(!1),p=Object(r.a)(f,2),x=p[0],v=p[1],g=function(t){var c=e.current.getCurrentTime();e.current.seekTo(c+t,"seconds")};return Object(n.useLayoutEffect)((function(){fetch("".concat(G).concat(c)).then((function(e){return e.json()})).then((function(e){var t=e.items;d(t[0].snippet)}))}),[c]),Object(a.jsxs)("div",{className:R.a.PlayPage,children:[Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(l.b,{to:"/",children:"\u9996\u9801"})}),Object(a.jsx)("li",{children:Object(a.jsx)(l.b,{to:"/favorite",children:"\u6536\u85cf\u9801"})})]}),Object(a.jsx)("h1",{children:o.title}),Object(a.jsxs)("div",{className:R.a.Player,children:[Object(a.jsx)(L.a,{controls:!0,playsinline:!0,ref:e,playing:O,onPause:function(){h(!1),v(!0)},url:"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8"}),x&&Object(a.jsxs)("div",{className:R.a.AD,children:[Object(a.jsx)("h3",{children:"AD"}),Object(a.jsx)("button",{onClick:function(){h(!0),v(!1)},children:"close AD"})]})]}),Object(a.jsx)("button",{onClick:g.bind(J,15),children:"forward 15sec"}),Object(a.jsx)("button",{onClick:g.bind(J,-15),children:"back 15sec"}),Object(a.jsx)("div",{children:o.description})]})},z=c(26),Q=c.n(z),q=function(e){var t=e.favoriteVideo,c=e.updateFavoriteVideo,n=function(e){delete t[e.id],c(t)};return Object(a.jsxs)("div",{className:Q.a.FavoritePage,children:[Object(a.jsx)("div",{className:Q.a.title,children:"\u6536\u85cf\u9801"}),Object.keys(t).map((function(e){return Object(a.jsx)(m,Object(o.a)(Object(o.a)({isFavorited:!0},t[e]),{},{onClick:n}),e)}))]})};var Z=function(){var e,t=Object(n.useState)(null!==(e=JSON.parse(localStorage.getItem("favoriteVideo")))&&void 0!==e?e:{}),c=Object(r.a)(t,2),i=c[0],s=c[1],d=function(e){localStorage.setItem("favoriteVideo",JSON.stringify(e)),s(Object(o.a)({},e))};return Object(a.jsxs)(l.a,{children:[Object(a.jsx)(f,{}),Object(a.jsx)("div",{className:b.a.App,children:Object(a.jsxs)(j.c,{children:[Object(a.jsx)(j.a,{exact:!0,path:"/play",children:Object(a.jsx)(U,{})}),Object(a.jsx)(j.a,{exact:!0,path:"/favorite",children:Object(a.jsx)(q,Object(o.a)({},{favoriteVideo:i,updateFavoriteVideo:d}))}),Object(a.jsx)(j.a,{exact:!0,path:"/",children:Object(a.jsx)(H,Object(o.a)({},{favoriteVideo:i,updateFavoriteVideo:d}))})]})})]})},K=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,69)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),i(e),s(e)}))};s.a.render(Object(a.jsx)(Z,{}),document.getElementById("root")),K()}},[[68,1,2]]]);
//# sourceMappingURL=main.78f9d454.chunk.js.map