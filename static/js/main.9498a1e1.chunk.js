(this["webpackJsonpvideo-platform"]=this["webpackJsonpvideo-platform"]||[]).push([[0],{16:function(e,t,c){e.exports={VideoItem:"style_VideoItem__22_xz",duration:"style_duration__2wVkD",title:"style_title__1oZt5",description:"style_description__3aa3G"}},18:function(e,t,c){e.exports={PlayPage:"style_PlayPage__3Nf3F",Player:"style_Player__1FIqP",AD:"style_AD__15s8F"}},23:function(e,t,c){e.exports={HomePage:"style_HomePage__39HyE",loading:"style_loading__2xXeE"}},28:function(e,t,c){},30:function(e,t,c){e.exports={Pagination:"style_Pagination__10Wd7"}},37:function(e,t,c){},63:function(e,t,c){"use strict";c.r(t);var n=c(1),i=c(0),a=c(27),s=c.n(a),o=(c(37),c(10)),r=c(11),l=c(4),j=c(2),d=c(28),b=c.n(d),u=c(15),O=c(16),h=c.n(O);function x(e){return Object(n.jsxs)("div",{className:h.a.VideoItem,children:[Object(n.jsxs)(l.b,{to:"/play?id=".concat(e.id),children:[Object(n.jsx)("img",{src:e.snippet.thumbnails.default.url,alt:e.snippet.title}),Object(n.jsx)("div",{className:h.a.title,children:e.snippet.title}),Object(n.jsx)("div",{className:h.a.description,children:e.snippet.description}),e.contentDetails&&Object(n.jsx)("div",{className:h.a.duration,children:e.contentDetails.duration})]}),Object(n.jsx)("button",{onClick:e.onClick.bind(this,e),children:e.buttonText})]})}var f=c(30),p=c.n(f),v=function(e){var t=e.page,c=e.lastPage;return Object(n.jsxs)("ul",{className:p.a.Pagination,children:[Object(n.jsx)("li",{children:t>1&&Object(n.jsx)(l.b,{to:"/?page=".concat(t-1),children:"\u4e0a\u4e00\u9801"})}),Object(u.a)(Array(c).keys()).map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)(l.b,{to:"/?page=".concat(e+1),children:e+1})},e)})),Object(n.jsx)("li",{children:t<c&&Object(n.jsx)(l.b,{to:"/?page=".concat(t+1),children:"\u4e0b\u4e00\u9801"})})]})},g=c(23),m=c.n(g),y="AIzaSyDOwkfXvX0jeCcDUeKHzaYE0Do8b2741lk",_=100,P=Math.ceil(_/12),k="https://www.googleapis.com/youtube/v3/search?key=".concat(y,"&maxResults=50&part=snippet&q="),D="https://www.googleapis.com/youtube/v3/videos?key=".concat(y,"&maxResults=50&part=snippet,contentDetails,statistics"),w=[],N=function e(t,c){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";fetch("".concat(t).concat(n)).then((function(e){return e.json()})).then((function(n){var i=n.items,a=n.nextPageToken;(w=[].concat(Object(u.a)(w),Object(u.a)(i))).length<_&&a?e(t,c,"&pageToken=".concat(a)):c(w)}))},S=function(e){var t,c=Object(i.useRef)(),a=Object(j.f)(),s=Object(i.useState)([]),d=Object(r.a)(s,2),b=d[0],u=d[1],O=new URLSearchParams(a.search),h=Number(null!==(t=O.get("page"))&&void 0!==t?t:1),f=function(t){var c=e.favoriteVideo;c[t.id]=t,e.updateFavoriteVideo(c)},p=function(e){P=Math.ceil(Math.min(_,w.length)/12),u(e)};return Object(i.useEffect)((function(){w=[],N("".concat(D,"&chart=mostPopular"),p)}),[]),Object(n.jsxs)("div",{className:m.a.HomePage,children:[Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(l.b,{to:"/",children:"\u9996\u9801"})}),Object(n.jsx)("li",{children:Object(n.jsx)(l.b,{to:"/favorite",children:"\u6536\u85cf\u9801"})})]}),Object(n.jsx)("h1",{children:"\u9996\u9801"}),Object(n.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=c.current.value.trim();t&&(u([]),w=[],N("".concat(k).concat(t),(function(e){var t=e.map((function(e){return e.id.videoId})).slice(0,50).join(",");w=[],N("".concat(D,"&id=").concat(t),p)})))},children:Object(n.jsx)("input",{type:"text",ref:c,required:!0,disabled:0===b.length})}),Object(n.jsx)(v,Object(o.a)({},{page:h,lastPage:P})),!b.length&&Object(n.jsx)("div",{className:m.a.loading,children:"Loading"}),b.slice(12*(h-1),12*h).map((function(e){return Object(n.jsx)(x,Object(o.a)(Object(o.a)({},e),{},{onClick:f,buttonText:"\u6536\u85cf"}),e.id)}))]})},V=c(31),C=c.n(V),I=c(18),F=c.n(I),A=void 0,T="https://www.googleapis.com/youtube/v3/videos?key=".concat("AIzaSyDOwkfXvX0jeCcDUeKHzaYE0Do8b2741lk","&part=snippet,contentDetails,statistics&id="),E=function(){var e=Object(i.useRef)(),t=Object(j.f)(),c=new URLSearchParams(t.search).get("id"),a=Object(i.useState)({}),s=Object(r.a)(a,2),o=s[0],d=s[1],b=Object(i.useState)(!0),u=Object(r.a)(b,2),O=u[0],h=u[1],x=Object(i.useState)(!1),f=Object(r.a)(x,2),p=f[0],v=f[1],g=function(t){var c=e.current.getCurrentTime();e.current.seekTo(c+t,"seconds")};return Object(i.useLayoutEffect)((function(){fetch("".concat(T).concat(c)).then((function(e){return e.json()})).then((function(e){var t=e.items;d(t[0].snippet)}))}),[c]),Object(n.jsxs)("div",{className:F.a.PlayPage,children:[Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(l.b,{to:"/",children:"\u9996\u9801"})}),Object(n.jsx)("li",{children:Object(n.jsx)(l.b,{to:"/favorite",children:"\u6536\u85cf\u9801"})})]}),Object(n.jsx)("h1",{children:o.title}),Object(n.jsxs)("div",{className:F.a.Player,children:[Object(n.jsx)(C.a,{controls:!0,playsinline:!0,ref:e,playing:O,onPause:function(){h(!1),v(!0)},url:"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8"}),p&&Object(n.jsxs)("div",{className:F.a.AD,children:[Object(n.jsx)("h3",{children:"AD"}),Object(n.jsx)("button",{onClick:function(){h(!0),v(!1)},children:"close AD"})]})]}),Object(n.jsx)("button",{onClick:g.bind(A,15),children:"forward 15sec"}),Object(n.jsx)("button",{onClick:g.bind(A,-15),children:"back 15sec"}),Object(n.jsx)("div",{children:o.description})]})},H=function(e){var t=e.favoriteVideo,c=e.updateFavoriteVideo,i=function(e){delete t[e.id],c(t)};return Object(n.jsxs)("div",{children:[Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(l.b,{to:"/",children:"\u9996\u9801"})}),Object(n.jsx)("li",{children:Object(n.jsx)(l.b,{to:"/favorite",children:"\u6536\u85cf\u9801"})})]}),Object(n.jsx)("h1",{children:"\u6536\u85cf\u9801"}),Object.keys(t).map((function(e){return Object(n.jsx)(x,Object(o.a)(Object(o.a)({},t[e]),{},{onClick:i,buttonText:"\u53d6\u6d88\u6536\u85cf"}),e)}))]})};var L=function(){var e,t=Object(i.useState)(null!==(e=JSON.parse(localStorage.getItem("favoriteVideo")))&&void 0!==e?e:{}),c=Object(r.a)(t,2),a=c[0],s=c[1],d=function(e){localStorage.setItem("favoriteVideo",JSON.stringify(e)),s(Object(o.a)({},e))};return Object(n.jsx)(l.a,{children:Object(n.jsx)("div",{className:b.a.App,children:Object(n.jsxs)(j.c,{children:[Object(n.jsx)(j.a,{exact:!0,path:"/play",children:Object(n.jsx)(E,{})}),Object(n.jsx)(j.a,{exact:!0,path:"/favorite",children:Object(n.jsx)(H,Object(o.a)({},{favoriteVideo:a,updateFavoriteVideo:d}))}),Object(n.jsx)(j.a,{exact:!0,path:"/",children:Object(n.jsx)(S,Object(o.a)({},{favoriteVideo:a,updateFavoriteVideo:d}))})]})})})},R=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,64)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),i(e),a(e),s(e)}))};s.a.render(Object(n.jsx)(L,{}),document.getElementById("root")),R()}},[[63,1,2]]]);
//# sourceMappingURL=main.9498a1e1.chunk.js.map